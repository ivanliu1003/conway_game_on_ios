<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>HabitOS ‚Äî Star Tracker</title>

  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="apple-mobile-web-app-title" content="HabitOS">

  <style>
    * { box-sizing: border-box; }
    body {
      margin: 0;
      overflow: hidden;
      font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", sans-serif;
      background: #07080f;
      color: #e5e9ff;
    }

    canvas {
      position: fixed;
      inset: 0;
      z-index: 0;
    }

    /* Ë™ûÈåÑÂçÄ */
    #quoteBox {
      position: fixed;
      top: calc(env(safe-area-inset-top, 10px) + 8px);
      left: 12px;
      right: 12px;
      padding: 8px 12px;
      border-radius: 10px;
      background: rgba(10, 10, 30, 0.86);
      backdrop-filter: blur(12px);
      border: 1px solid rgba(120,140,255,0.6);
      font-size: 13px;
      z-index: 5;
      text-align: center;
    }
    #quoteText {
      opacity: 0.9;
    }

    /* ÁøíÊÖ£ÂàóË°® */
    #habitList {
      position: fixed;
      top: calc(env(safe-area-inset-top, 10px) + 60px);
      bottom: calc(env(safe-area-inset-bottom, 0px) + 70px);
      left: 0;
      right: 0;
      padding: 8px 10px 8px 10px;
      overflow-y: auto;
      z-index: 5;
    }

    .habitCard {
      background: rgba(10, 12, 30, 0.9);
      border-radius: 12px;
      border: 1px solid rgba(80, 90, 150, 0.7);
      padding: 10px 12px;
      margin-bottom: 8px;
      box-shadow: 0 0 14px rgba(0,0,0,0.4);
    }

    .habitHeader {
      display: flex;
      align-items: center;
      justify-content: space-between;
      margin-bottom: 4px;
    }

    .habitName {
      font-size: 15px;
      font-weight: 600;
    }

    .habitStreak {
      font-size: 11px;
      color: #ffc96a;
    }

    .habitDesc {
      font-size: 12px;
      opacity: 0.8;
      margin-bottom: 6px;
    }

    .habitMainRow {
      display: flex;
      align-items: center;
      gap: 8px;
      margin-bottom: 4px;
    }

    .bigStar {
      font-size: 32px;
      cursor: pointer;
      transition: transform 0.2s ease-out, text-shadow 0.2s, color 0.2s;
      color: #3b3f55;
    }

    .bigStar.done {
      color: #ffd95c;
      text-shadow: 0 0 16px rgba(255,217,92,0.9);
      transform: scale(1.05);
    }

    .toggleBtn {
      border: none;
      border-radius: 999px;
      padding: 6px 12px;
      background: #2d5bff;
      color: #e5e9ff;
      font-size: 12px;
      font-family: inherit;
      min-width: 90px;
    }

    .editBtn {
      border: none;
      border-radius: 999px;
      padding: 4px 10px;
      background: #202546;
      color: #b9c0ff;
      font-size: 10px;
      font-family: inherit;
    }

    .toggleBtn:active,
    .editBtn:active {
      transform: scale(0.96);
    }

    .miniHistory {
      display: flex;
      gap: 3px;
      margin-top: 2px;
    }
    .miniDot {
      width: 10px;
      height: 10px;
      border-radius: 3px;
      background: #1b2035;
    }
    .miniDot.done {
      background: #4fa3ff;
      box-shadow: 0 0 5px #4fa3ff;
    }

    /* Â∫ïÈÉ®Â∑•ÂÖ∑Âàó */
    #toolbar {
      position: fixed;
      bottom: env(safe-area-inset-bottom, 0px);
      left: 0;
      right: 0;
      padding: 10px 12px calc(10px + env(safe-area-inset-bottom, 0px));
      display: flex;
      justify-content: center;
      z-index: 10;
    }

    #toolbarInner {
      background: rgba(10,10,30,0.9);
      backdrop-filter: blur(10px);
      border-radius: 999px;
      padding: 6px 10px;
      display: flex;
      gap: 6px;
      box-shadow: 0 0 18px rgba(0,0,0,0.7);
    }

    .toolBtn {
      border: none;
      border-radius: 999px;
      padding: 7px 12px;
      background: #1b2355;
      color: #e5e9ff;
      font-size: 12px;
      font-family: inherit;
      min-width: 70px;
    }
    .toolBtn.primary { background: #2d5bff; }
    .toolBtn.danger { background: #ff4b7a; }
    .toolBtn:active { transform: scale(0.96); }

    /* HUD */
    #hud {
      position: fixed;
      top: 50%;
      left: 50%;
      transform: translate(-50%, -50%);
      padding: 14px 20px;
      background: white;
      color: #000;
      font-family: ui-monospace, monospace;
      border-radius: 10px;
      box-shadow: 0 0 18px rgba(255,255,255,0.9);
      opacity: 0;
      z-index: 20;
      transition: opacity 0.25s ease-out;
      font-size: 16px;
      white-space: pre-line;
      text-align: center;
    }
  </style>
</head>
<body>

<canvas id="bg"></canvas>

<!-- ÂãµÂøóË™ûÈåÑ -->
<div id="quoteBox">
  <div id="quoteText"></div>
</div>

<!-- Â§öÁøíÊÖ£ÂàóË°® -->
<div id="habitList"></div>

<!-- HUD -->
<div id="hud"></div>

<!-- Â∑•ÂÖ∑Âàó -->
<div id="toolbar">
  <div id="toolbarInner">
    <button class="toolBtn primary" id="btnAddHabit">Êñ∞Â¢ûÁøíÊÖ£</button>
    <button class="toolBtn" id="btnNewQuote">Êèõ‰∏ÄÂè•</button>
    <button class="toolBtn danger" id="btnUniverse">‚ö°</button>
  </div>
</div>

<script>
/* ========= Ë™ûÈåÑ ========= */
const QUOTES = [
  "‰ªäÂ§©ÂÅöÁöÑÊØè‰∏ÄÈ°åÔºåÈÉΩÊòØÂú®Âπ´Êú™‰æÜÁöÑËá™Â∑±ÈÇÑÂÇµ„ÄÇ",
  "‰∏çÊòØ‰Ω†‰∏çÂ§†ËÅ∞ÊòéÔºåÊòØ‰Ω†ÈÇÑ‰∏çÂ§†Á©©ÂÆöÂú∞Âùê‰∏ã‰æÜ„ÄÇ",
  "ÂÖàÊ±ÇÊúâÔºåÂÜçÊ±ÇÂ•ΩÔºõÂÖàÈñãÂßãÔºåÂÜçÂÆåÁæé„ÄÇ",
  "‰Ω†ÁèæÂú®ÂÅ∑ÁöÑÊá∂ÔºåÊú™‰æÜÈÉΩÊúÉÁî®Êõ¥Á°¨ÁöÑÊñπÂºèÈÇÑÂõû‰æÜ„ÄÇ",
  "Â∞àÊ≥®‰∏ÄÂ∞èÊôÇÔºåÊØîÂàÜÂøÉ‰∏âÂ∞èÊôÇÊúâÁî®Â§ö‰∫Ü„ÄÇ",
  "Âà•Ë∑üÂà•‰∫∫ÊØîÔºåÂÖàÊääÊò®Â§©ÁöÑËá™Â∑±ÊâìÁàÜÂÜçË™™„ÄÇ",
  "Â¶ÇÊûú‰∏ÄÂÆöË¶ÅÁÜ¨Â§úÔºåÈÇ£Â∞±Á¢∫‰øùÂÆÉÊòØÂÄºÂæóÁöÑ„ÄÇ",
  "Â≠∏Áøí‰∏çÊòØÁÇ∫‰∫ÜËÄÉË©¶ÔºåÊòØÁÇ∫‰∫ÜËÆì‰Ω†‰ª•ÂæåÂèØ‰ª•ÈÅ∏Êìá„ÄÇ",
  "‰Ω†ÁèæÂú®ÂïÉÁöÑÊØè‰∏ÄÈ†ÅÔºåÈÉΩÊòØÂπ´‰Ω†ÊâìÈñã‰∏ÄÊâáÈñÄ„ÄÇ",
  "Áï∂‰Ω†‰∏çÊÉ≥ËÆÄÊõ∏ÊôÇÔºåÂâõÂ•ΩÂ∞±ÊòØÊúÄÈúÄË¶ÅËÆÄÊõ∏ÁöÑÊôÇÂÄô„ÄÇ"
  "Áï∂‰Ω†Êç≤Ëµ∑Ë¢ñÂ≠êÔºåÂÖ®‰∏ñÁïåÈÉΩÊúÉËÆìË∑Ø„ÄÇ",
"‰Ω†‰∏çÊòØÊôÆÈÄö‰∫∫Ôºå‰Ω†ÊòØËìÑÂã¢ÂæÖÁôºÁöÑÊÄ™Áâ©„ÄÇ",
"‰Ω†ÁöÑÂä™ÂäõÊ≠£Âú®ÈÜûÈáÄ‰∏ÄÂ†¥Â∑®ËÆä„ÄÇ",
"Ê≤íÊúâ‰∫∫ËÉΩÈòªÊ≠¢‰Ω†ÔºåÈô§‰∫Ü‰Ω†Ëá™Â∑±„ÄÇ",
"‰Ω†ÁöÑÂ∞çÊâãÊ≠£Âú®‰Ωé‰º∞‰Ω†ÔºåËÄå‰Ω†Ê≠£Âú®ËÆäÂº∑„ÄÇ",
"ÊØèÊ¨°Èªû‰∫ÆÊòüÊòüÔºåÈÉΩÂú®ÂñöÈÜí‰Ω†È´îÂÖßÁöÑÊÄ™Áâ©„ÄÇ",
"‰Ω†‰∏çÊòØÂú®ËÆÄÊõ∏Ôºå‰Ω†Âú®Á¥ØÁ©çÁ†¥Â±ÄÁöÑÂäõÈáè„ÄÇ",
"‰Ω†‰ªäÂ§©‰∏çÂä™ÂäõÔºåÊòéÂ§©ÈÄ£ÂæåÊÇîÁöÑË≥áÊ†ºÈÉΩÊ≤íÊúâ„ÄÇ",
"‰Ω†Ë¶ÅËÆäÊàê‰ªª‰ΩïËÄÉË©¶ÈÉΩÂ£ì‰∏ç‰ΩèÁöÑ‰∫∫„ÄÇ",
"‰Ω†Ê≠£Âú®ÊâìÈÄ†‰∏ÄÂÄãÈÄ£‰Ω†Ëá™Â∑±ÈÉΩÂÆ≥ÊÄïÁöÑÊú™‰æÜÁâàÊú¨„ÄÇ",
"‰Ω†ÁÜ¨ÈÅéÈªëÂ§úÔºå‰Ω†Â∞±ÊàêÁÇ∫ÈªëÂ§ú„ÄÇ",
"‰Ω†‰∏çÊòØÁ¥ØÔºå‰Ω†ÊòØÂú®ÈÄ≤Âåñ„ÄÇ",
"Êú™‰æÜÊúÉÊúâ‰∏ÄÂàªÔºå‰Ω†ÊúÉÊÑüË¨ùÊ≠§ÂàªÁöÑÁã†„ÄÇ",
"Âà•‰∫∫ÊúÉÂÆ≥ÊÄï‰Ω†ÈÄôÁ®ÆÁ©©ÂÆöÁöÑÂä™Âäõ„ÄÇ",
"‰Ω†ÊòØÁÇ∫‰∫ÜÂæÅÊúçÔºåËÄå‰∏çÊòØÊ∑∑ÈÅéÂéª„ÄÇ",
"ÁèæÂú®ÁöÑÁÖéÁÜ¨ÊòØ‰Ω†ËÉΩÈáèÁöÑÂ£ìÁ∏ÆÂåÖ„ÄÇ",
"ÂÆåÊàê‰∏Ä‰ª∂‰∫ãÔºåÂ∞±ÊòØÂ∞ç‰∏ñÁïåÁöÑ‰∏ÄÊ¨°‰∏ãÂÖã‰∏ä„ÄÇ",
"‰Ω†Ëµ∞ÁöÑÊØè‰∏ÄÊ≠•ÈÉΩÂú®Á™ÅÁ†¥ÂëΩÈÅãÁöÑÂäáÊú¨„ÄÇ",
"‰Ω†‰∏çÊòØÂú®Âä™ÂäõÔºå‰Ω†Âú®Á©çËìÑËÉΩÈáèÊ∫ñÂÇôÁøªÊ°å„ÄÇ",
"‰ªäÂ§©Áã†‰∏ÄÊ¨°ÔºåÊòéÂ§©Â∞ëÁã†ÂçÅÊ¨°„ÄÇ"
  "Êú™‰æÜÁöÑ‰Ω†ÊúÉÊÑüË¨ùÁèæÂú®Âä™ÂäõÁöÑ‰Ω†„ÄÇ",
"‰Ω†Ê≠£Âú®ÁÇ∫Â§¢ÊÉ≥ÊâìÂü∫Á§é„ÄÇ",
"‰Ω†ÁèæÂú®ÁöÑÁ¥ØÔºåÊú™‰æÜÊúÉËÆäÊàê‰Ω†ÁöÑÂ∫ïÊ∞£„ÄÇ",
"‰Ω†Ë¶ÅÁöÑÁîüÊ¥ªÂú®ÂâçÈù¢Á≠â‰Ω†„ÄÇ",
"‰Ω†‰∏ÄÈªûÈÉΩ‰∏çÊôÆÈÄöÔºå‰Ω†Âè™ÊòØÈÇÑÊ≤íÁôºÂÖâ„ÄÇ",
"Â§¢ÊÉ≥‰∏çÊòØË™™Ë™™ÔºåÊòØÂÅöÂá∫‰æÜÁöÑ„ÄÇ",
"‰∏ÄÊ≠•‰∏ÄÊ≠•Ôºå‰Ω†Èõ¢ÊÉ≥Ë¶ÅÁöÑÊú™‰æÜË∂äËøë„ÄÇ",
"Âè™Ë¶ÅÊñπÂêëÂ∞ç‰∫ÜÔºåÊØèÂâçÈÄ≤‰∏ÄÊ≠•ÈÉΩÊúâÁî®„ÄÇ",
"‰∏çË¶Å‰Ωé‰º∞Èï∑ÊúüÁ¥ØÁ©çÁöÑÂäõÈáè„ÄÇ",
"‰Ω†ÁèæÂú®Âú®Êê≠ÈöéÊ¢ØÔºåÊú™‰æÜÊâçË∏©ÂæóÁ©©„ÄÇ",
"‰Ω†ÂÄºÂæóÈÅé‰Ω†ÊÉ≥ÂÉèÁöÑÁîüÊ¥ª„ÄÇ",
"Ë∑ØÂæàÈÅ†Ôºå‰ΩÜ‰Ω†Â∑≤Á∂ìÂú®Ë∑Ø‰∏ä‰∫Ü„ÄÇ",
"‰ªäÊó•ÁöÑÂ†ÖÊåÅÔºåÊòØÊòéÊó•ÁöÑÊ¶ÆËÄÄ„ÄÇ",
"‰Ω†Ê≠£Âú®ÊâìÈÄ†Ëá™Â∑±ÁöÑÊú™‰æÜÔºå‰∏çÊòØÁé©ÁöÑ„ÄÇ",
"‰Ω†Ë¶ÅÁöÑ‰∏çÊòØÂ•áËπüÔºåÊòØÊåÅÁ∫å„ÄÇ",
"‰Ω†‰ªäÂ§©ÁöÑÂä™ÂäõÈÉΩÊòØ‰Ω†ÁöÑÁ±åÁ¢º„ÄÇ",
"ÂæÄÂâç‰∏ÄÊ≠•Â∞±ÊòØÊñ∞ÁöÑ‰∏ñÁïå„ÄÇ",
"‰Ω†ÁöÑÂ§¢ÊÉ≥ÈúÄË¶Å‰Ω†ÁèæÂú®ÁöÑÂä™Âäõ„ÄÇ",
"Âà•ËÆìÊú™‰æÜÁöÑËá™Â∑±Â§±Êúõ„ÄÇ",
"‰Ω†ÂÄºÂæó‰∏ÄÂÄãÊõ¥Â•ΩÁöÑÊòéÂ§©ÔºåËÄå‰Ω†Ê≠£Âú®Âª∫ÈÄ†ÂÆÉ„ÄÇ"
"‰Ω†‰ªäÂ§©ÂÅ∑ÁöÑÊá∂ÔºåÊú™‰æÜÈÉΩÊúÉÁã†Áã†Êî∂Âà©ÊÅØ„ÄÇ",
"Âøç‰∏Ä‰∏ãÔºåÂæåÈù¢ÊúÉÂæàÂ•Ω„ÄÇ",
"‰Ω†ÊÉ≥Ë¶ÅÁöÑÂæàË≤¥Ôºå‰Ω†‰∏çËÉΩÁèæÂú®ÂÅú‰∏ã‰æÜ„ÄÇ",
"ÁÜ¨ÈÅéÈÄôÊÆµÊôÇÈñìÔºåÂæåÈù¢ÈÉΩÊòØÁîúÁöÑ„ÄÇ",
"‰Ω†ÁèæÂú®Êíê‰ΩèÁöÑËæõËã¶ÊúÉÊèõÂõû‰Ω†Ë¶ÅÁöÑÁîüÊ¥ª„ÄÇ",
"Èõ£Â∞±Â∞ç‰∫ÜÔºåÂ•ΩÊù±Ë•ø‰∏çÂèØËÉΩÂÆπÊòì„ÄÇ",
"‰Ω†È°òÊÑèÂ§öÊíê 10 ÂàÜÈêòÔºåÂ∞±ÊòØÂú®Ë∂ÖË∂ä‰∏ÄÂ†Ü‰∫∫„ÄÇ",
"‰Ω†ÂÅú‰∏Ä‰∏ãÊ≤íÈóú‰øÇÔºå‰ΩÜ‰∏çË¶ÅÊîæÊ£Ñ„ÄÇ",
"Â†ÖÂº∑‰∏çÊòØÂ§©ÁîüÔºåÊòØÁøíÊÖ£„ÄÇ",
"‰Ω†Ë∂äÁã†ÔºåÊú™‰æÜË∂äÊ∫´Êüî„ÄÇ",
"Ê≤íÊúâ‰ªÄÈ∫ºÊòØÁôΩÂèóÁöÑËã¶„ÄÇ",
"ÁóõËã¶‰∏çÊòØÊäòÁ£®ÔºåÊòØÁáÉÊñô„ÄÇ",
"‰Ω†ËÉΩÊâøÂèóÁöÑÊØî‰Ω†Ëá™Â∑±‰ª•ÁÇ∫ÁöÑÈÇÑÂ§ö„ÄÇ",
"‰Ω†Ë∂äÊÉ≥ÈÄÉÁöÑÂú∞ÊñπÔºåË∂äÊòØ‰Ω†ÁöÑÁ™ÅÁ†¥Èªû„ÄÇ",
"‰Ω†ÂèóÁöÑÊØè‰∏ÄÊ¨°Ëã¶ÈÉΩÊúÉËÆäÊàêÂäõÈáè„ÄÇ",
"‰∫∫ÁîüÊ≤íÊúâÁôΩÁ∑¥ÁöÑÂäü„ÄÇ",
"ÊØîÂà•‰∫∫Â§öÂí¨‰∏ÄÁßíÔºå‰Ω†Â∞±Êõ¥Âº∑‰∏ÄÂ±§„ÄÇ",
"Ë∂äËâ±Èõ£ÁöÑÂú∞ÊñπË∂äÈúÄË¶Å‰Ω†Áïô‰∏ã„ÄÇ",
"Âí¨ËëóÁâôÊíê‰∏ãÂéªÔºå‰Ω†ÊúÉËÆäÊàêÊÄ™Áâ©„ÄÇ",
"Á¥ØÔºüÈÇ£ÊòØ‰Ω†Âú®ËÆäÂº∑ÁöÑË≠âÊòé„ÄÇ"
"‰Ω†‰∏çÈúÄË¶ÅÂÆåÁæéÔºå‰Ω†Âè™ÈúÄË¶ÅÊõ¥Â•Ω„ÄÇ",
"ÁÑ¶ÊÖÆÊòØÂõ†ÁÇ∫‰Ω†ÈÇÑ‰∏çÂ§†Áõ∏‰ø°Ëá™Â∑±„ÄÇ",
"ÊîæËºïÈ¨ÜÔºå‰Ω†ÂÖ∂ÂØ¶ÂÅöÂæóÊØî‰Ω†ÊÉ≥ÁöÑÂ•Ω„ÄÇ",
"ÊÉÖÁ∑í‰∏çÊúÉÊØÄÊéâ‰Ω†ÔºåÈÄÉÈÅøÊúÉ„ÄÇ",
"‰Ω†‰∏çÊòØÂ§±ÊïóÔºå‰Ω†Âè™ÊòØÊ≠£Âú®Ë™øÊï¥„ÄÇ",
"Áµ¶Ëá™Â∑±‰∏ÄÈªûËÄêÂøÉÔºåÊàêÈï∑ÈúÄË¶ÅÊôÇÈñì„ÄÇ",
"Ë¶∫ÂæóÁ¥Ø‰∏çÊòØ‰Ω†‰∏çÂ•ΩÔºåÊòØ‰Ω†Â§™Âä™Âäõ‰∫Ü„ÄÇ",
"‰∏çË¶ÅÊää‰∏ÄÊ¨°Â§±ÊïóÁï∂ÊàêÂÖ®ÈÉ®„ÄÇ",
"‰Ω†ÂÄºÂæóË¢´ÁêÜËß£Ôºå‰ΩÜÊõ¥ÂÄºÂæóËÆäÂº∑„ÄÇ",
"‰Ω†‰∏çÊòØÂú®Èáç‰æÜÔºå‰Ω†ÊòØÂú®ÈÄêÊ≠•Ê†°Ê∫ñÊñπÂêë„ÄÇ",
"‰Ω†ÁöÑÁØÄÂ•è‰Ω†Ëá™Â∑±Ê±∫ÂÆö„ÄÇ",
"‰Ω†ÂèØ‰ª•ÊÖ¢ÊÖ¢‰æÜÔºå‰ΩÜ‰∏çËÉΩ‰∏ç‰æÜ„ÄÇ",
"‰∏çË¶ÅÊää‰ªäÂ§©ÁöÑÂøÉÊÉÖÂ∏∂Âà∞ÊòéÂ§©„ÄÇ",
"‰Ω†Â∑≤Á∂ìÊØîÊò®Â§©Êõ¥Êé•Ëøë‰∫Ü„ÄÇ",
"Èõ£ÈÅéÂ∞±Âì≠ÔºåÂì≠ÂÆåÁπºÁ∫åÂâçÈÄ≤„ÄÇ",
"‰Ω†‰∏çÂøÖÂÅáË£ùÂ†ÖÂº∑Ôºå‰ΩÜ‰Ω†ÂèØ‰ª•ÈÅ∏ÊìáÂÜçË©¶‰∏ÄÊ¨°„ÄÇ",
"ÊØè‰∏ÄÊ¨°Â¥©ÊΩ∞ÈÉΩÂú®Âπ´‰Ω†ÈáçÂª∫„ÄÇ",
"‰Ω†Ê≤íÂïèÈ°åÔºå‰Ω†Âú®ÈÄ≤Ê≠•„ÄÇ",
"‰Ω†ËÉΩÊíê‰ΩèÁöÑÊØî‰Ω†ÊÉ≥ÂÉèÂ§ö„ÄÇ",
"Áµ¶Ëá™Â∑±‰∏ÄÊ¨°Ê©üÊúÉÔºåÂÜçÂæÄÂâçËµ∞‰∏ÄÊ≠•„ÄÇ"
"‰Ω†ÁèæÂú®ÂÅöÁöÑÊØè‰∏ÄÈ°åÔºåÈÉΩÊòØÂà•‰∫∫Ëº∏ÊéâÁöÑ‰∏ÄÈ°å„ÄÇ",
"‰∏çË¶ÅÊÄïÁ´∂Áà≠Ôºå‰Ω†‰πüÊòØÂà•‰∫∫ÁöÑÂ£ìÂäõ‰æÜÊ∫ê„ÄÇ",
"Áï∂‰Ω†Âä™ÂäõÊôÇÔºå‰Ω†Â∞±ÊòØÂ∞çÊâãÊúÄÂÆ≥ÊÄïÁöÑÂ≠òÂú®„ÄÇ",
"ÂàÜÊï∏‰∏çÊúÉËÉåÂèõ‰Ω†ÔºåÂÆÉÂè™ÊúÉÂèçÊò†‰Ω†ÂÅöÂ§öÂ∞ë„ÄÇ",
"ËÄÉÂ†¥‰∏äËÉΩÊíê‰ΩèÁöÑÔºåÂπ≥Â∏∏ÈÉΩÊíêÈÅé‰∫ÜÊõ¥Â§ö„ÄÇ",
"‰Ω†Â§öËÆÄ‰∏ÄÈ†ÅÔºåÂà•‰∫∫Â∞±Â∞ëËÆÄ‰Ω†‰∏ÄÈ†Å„ÄÇ",
"ÁóõËã¶ÊòØÊö´ÊôÇÁöÑÔºåÂàÜÊï∏ÊòØÊ∞∏ÈÅ†ÁöÑ„ÄÇ",
"‰Ω†Âä™Âäõ‰∏çÊòØÁÇ∫‰∫ÜÁ¨¨‰∏ÄÔºåÊòØÁÇ∫‰∫Ü‰∏çÁï∂ÊúÄÂæå„ÄÇ",
"Ë™çÁúüÁöÑ‰∫∫Ê∞∏ÈÅ†Ë¥èÂú®Á¥∞ÁØÄ„ÄÇ",
"‰Ω†ÁèæÂú®ÁöÑÁñ≤ÂÄ¶ÔºåÊú™‰æÜÊúÉËÆäÊàê‰Ω†Ë∂ÖË∂äÂà•‰∫∫ÁöÑÊ≠¶Âô®„ÄÇ",
"Ë∂äËâ±Èõ£ÁöÑÂú∞ÊñπË∂äÊ≤í‰∫∫È°òÊÑèÈÄ≤ÂéªÔºåÊâÄ‰ª•Ë∂äÂÆπÊòìË¥è„ÄÇ",
"‰Ω†Áï∂‰∏ç‰∫ÜÂ§©ÊâçÔºå‰ΩÜ‰Ω†ÂèØ‰ª•Áï∂Áã†ËßíËâ≤„ÄÇ",
"Ê¶úÂñÆ‰∏çÊòØ IQ Ê¶úÔºåÊòØÂ†ÖÊåÅÊ¶ú„ÄÇ",
"‰Ω†Âú®Âä™ÂäõÔºåÂà•‰∫∫‰πüÂú®Ôºõ‰ΩÜ‰Ω†ÂèØ‰ª•ÊØî‰ªñÊõ¥Á©©„ÄÇ",
"Êúâ‰∫∫Âú®ÊâìÈÅäÊà≤ÔºåÊúâ‰∫∫Âú®ÊãºÂëΩÔºå‰Ω†ÈÅ∏Âì™ÈÇäÔºü",
"Á´∂Áà≠ÊÆòÈÖ∑Ôºå‰ΩÜ‰Ω†ÂèØ‰ª•Êõ¥ÊÆòÈÖ∑„ÄÇ",
"‰Ω†ÊÄïÁöÑÂ∞çÊâãÔºå‰πüÂú®ÊÄï‰Ω†„ÄÇ",
"ÂàÜÊï∏ÁöÑËÉåÂæåÔºåÊòØ‰Ω†Ëá™Â∑±ÊúÄÁúüÂØ¶ÁöÑÊ®£Â≠ê„ÄÇ",
"‰Ω†Á¥Ø‰∫Ü‰∏çÂè™‰Ω†Á¥ØÔºåÂ§ßÂÆ∂ÈÉΩÁ¥ØÔºåÁúãË™∞ÊíêÂæó‰πÖ„ÄÇ",
"‰Ω†‰ªäÂ§©Â†ÖÊåÅÁöÑÂú∞ÊñπÔºåÂ∞±ÊòØ‰Ω†ÊòéÂ§©È†òÂÖàÁöÑÂú∞Êñπ„ÄÇ"
"‰Ω†ÁèæÂú®ÈÅ≠ÈÅáÁöÑÔºåÈÉΩÊúÉËÆäÊàê‰Ω†ÁöÑÂ∫ïÂ±§ËÉΩÂäõ„ÄÇ",
"ÁóõËã¶ÊòØÊàêÈï∑ÁöÑÂâØ‰ΩúÁî®„ÄÇ",
"‰Ω†Ë¶ÅËÆäÊàêËá™Â∑±ÊúÉÁæ®ÊÖïÁöÑ‰∫∫„ÄÇ",
"ËÆäÂº∑‰∏çÊòØÁÇ´ËÄÄÔºåÊòØ‰øùË≠∑Ëá™Â∑±„ÄÇ",
"‰Ω†‰∏çËÉΩÊéßÂà∂‰∏ñÁïåÔºå‰ΩÜËÉΩÊéßÂà∂Ëá™Â∑±„ÄÇ",
"‰Ω†ÂîØ‰∏ÄÈúÄË¶ÅÊâìÊïóÁöÑÔºåÂ∞±ÊòØÊò®Â§©ÁöÑ‰Ω†„ÄÇ",
"Ë∑®ÈÅé‰∏Ä‰ª∂ÁóõËã¶ÁöÑ‰∫ãÔºå‰Ω†Â∞±ÊúÉÂçáÁ¥ö‰∏ÄÊ¨°„ÄÇ",
"Ê≤íÊúâÁôΩËµ∞ÁöÑË∑ØÔºåÊØè‰∏ÄÊ≠•ÈÉΩÁÆóÊï∏„ÄÇ",
"‰Ω†ÁöÑÂä™Âäõ‰∏çÊúÉÁ´ãÂç≥Ë¶ãÊïàÔºå‰ΩÜÊúÉÈªòÈªòÁ©çÁ¥Ø„ÄÇ",
"‰∏ñÁïå‰∏çÊ¨†‰Ω†‰ªª‰Ωï‰∫ãÔºå‰Ω†Ê¨†Ëá™Â∑±‰∏ÄÂÄãÂä™ÂäõÁöÑÁêÜÁî±„ÄÇ",
"ÊØè‰∏ÄÊ¨°Ëá™ÊàëÁ™ÅÁ†¥ÔºåÈÉΩÂÄºÂæóÁ¥ÄÂøµ„ÄÇ",
"‰Ω†ÁÇ∫Ëá™Â∑±ÂÅöÁöÑË∂äÂ§öÔºå‰Ω†Â∞±Ë∂äËá™Áî±„ÄÇ",
"Ë∂äÂä™ÂäõÔºå‰Ω†ÁöÑ‰∏ñÁïåË∂äÂ§ß„ÄÇ",
"Âà•ÊÄïÊÖ¢ÔºåÂè™ÊÄïÂÅú„ÄÇ",
"‰Ω†‰∏çÊòØÊ≤íÊôÇÈñìÔºåÊòØÈÇÑÊ≤íË®≠ÂÆöÂÑ™ÂÖàÈ†ÜÂ∫è„ÄÇ",
"‰Ω†Â∞çËá™Â∑±Ë∂äÁã†Ôºå‰∏ñÁïåÂ∞ç‰Ω†Ë∂äÊ∫´Êüî„ÄÇ",
"Âøç‰ΩèÁï∂‰∏ãÁöÑËàíÊúçÔºåÊèõ‰æÜ‰∏ÄÁîüÁöÑËàíÊúç„ÄÇ",
"‰∏çËàíÊúçÂ∞±Â∞ç‰∫ÜÔºåÈÇ£ÊòØÊàêÈï∑„ÄÇ",
"‰Ω†Ê≠£Âú®Â°ëÈÄ†‰∏ÄÂÄãÊõ¥Âé≤ÂÆ≥ÁöÑ‰Ω†„ÄÇ",
"‰Ω†‰æÜÈÄô‰∏ñÁïå‰∏çÊòØÁÇ∫‰∫ÜÁï∂ÊôÆÈÄö‰∫∫„ÄÇ"
"‰Ω†‰∏çÊòØ‰∏çÊúÉÔºåÂè™ÊòØÈÇÑÊ≤íÈñãÂßã„ÄÇ",
"ÊãñÂª∂Âè™ÊúÉËÆì‰Ω†Êõ¥ÁóõËã¶„ÄÇ",
"Âè™ÊòØÂÅö 5 ÂàÜÈêòÔºå‰Ω†ÊúÉÊÉ≥ÁπºÁ∫åÂÅö„ÄÇ",
"ÈñãÂßãÊòØ 80% ÁöÑÈõ£Â∫¶ÔºåÂâ©‰∏ãÈÉΩÊòØÊÖ£ÊÄß„ÄÇ",
"Ë∂äÂÆ≥ÊÄïÁöÑ‰∫ãÔºåË∂äÂÄºÂæóÂÖàÂÅö„ÄÇ",
"‰∫îÁßíÊ≥ïÂâáÔºöÂÄíÊï∏ÂÆåÂ∞±ÈñãÂßã„ÄÇ",
"Á≠âÂøÉÊÉÖÂ•ΩÊâçÂÅöÔºå‰Ω†Ê∞∏ÈÅ†‰∏çÊúÉÈñãÂßã„ÄÇ",
"Êää‰ªªÂãôÂàáÊàê‰∏ÄÂè£Â§ßÂ∞èÔºå‰Ω†Â∞±ËÉΩÂêû‰∏ãÂéª„ÄÇ",
"ÊãñÂª∂‰∏çÊòØ‰ºëÊÅØÔºåÊòØË≤†Êìî„ÄÇ",
"‰∏çÂÅöÊØîÂÅöÊõ¥Á¥Ø„ÄÇ",
"Âãï‰∏Ä‰∏ãÂ∞±Ë¥è‰∫Ü„ÄÇ",
"‰Ω†ÊãñÂª∂ÁöÑÊØè‰∏ÄÂàÜÈêòÔºåÊú™‰æÜÈÉΩÂú®Á≠â‰Ω†ÈÇÑ„ÄÇ",
"‰∏çË¶ÅÊÉ≥Â§™Â§öÔºåÂÖàÂÅö‰∏ÄÈªûÈªû„ÄÇ",
"ÊÉ≥ËëóÂéªÂÅöÔºå‰∏çÂ¶ÇÂÅö‰∫ÜÂÜçÊÉ≥„ÄÇ",
"‰Ω†Ë∂äÈÄÉÈÅøÔºåÂ£ìÂäõË∂äÂ§ß„ÄÇ",
"ÂÖ∂ÂØ¶‰Ω†Ê≤íÊúâÈÇ£È∫ºÂøôÔºåÂè™ÊòØÈñãÂßãÂ§™ÊÖ¢„ÄÇ",
"ÊãñÂª∂ÊòØ‰Ω†ÁöÑÊïµ‰∫∫ÔºåË°åÂãïÊòØ‰Ω†ÁöÑÊ≠¶Âô®„ÄÇ",
"ÊúÄÂ•ΩÁöÑÈñãÂßãÊôÇÊ©üÔºåÂ∞±ÊòØÁèæÂú®„ÄÇ",
"ÁóõËã¶Âè™ÊúÉÊåÅÁ∫åÂà∞‰Ω†ÈñãÂßãÈÇ£‰∏ÄÂàª„ÄÇ",
"ÊÉ≥Ê∏ÖÊ•öÂæàÈáçË¶ÅÔºå‰ΩÜÈñãÂßãÊõ¥ÈáçË¶Å„ÄÇ"
"Ëá™Âæã‰∏çÊòØÈôêÂà∂ÔºåÊòØËá™Áî±ÁöÑÂÖ•Â†¥Âà∏„ÄÇ",
"‰Ω†ÁèæÂú®ÊéåÊéßÁöÑËá™Â∑±ÔºåÊúÉÊéåÊéß‰Ω†ÁöÑÊú™‰æÜ„ÄÇ",
"Áï∂‰Ω†ËÆäÂº∑Ôºå‰∏ñÁïåÊúÉÁµ¶‰Ω†ËÆìË∑Ø„ÄÇ",
"ÁøíÊÖ£Âú®ÊÇÑÊÇÑÊîπËÆä‰Ω†ÔºåËÄå‰Ω†ÂçªÊ≤íÊúâÂØüË¶∫„ÄÇ",
"ÂÅöÂ∞çÁöÑ‰∫ãÔºå‰∏çÂÅöÁàΩÁöÑ‰∫ã„ÄÇ",
"ÈñãÂßãÈõ£Ôºå‰ΩÜÂæåÈù¢ÊúÉÊÑüË¨ùÁèæÂú®ÁöÑ‰Ω†„ÄÇ",
"‰Ω†ÊØèÂ§©ÂÅöÁöÑ‰∫ãÔºåÊ≠£Âú®Â°ëÈÄ†‰Ω†ÊÉ≥ÊàêÁÇ∫ÁöÑ‰∫∫„ÄÇ",
"Â†ÖÊåÅÊúÉËá™ÂãïÁ¥ØÁ©çÂÉπÂÄº„ÄÇ",
"‰∏çË¶ÅÂ∞èÁúã‰∏ÄÂ§©ÁöÑÂäõÈáèÔºåÂÆÉÂèØ‰ª•Ê±∫ÂÆö‰Ω†ÁöÑÊñπÂêë„ÄÇ",
"‰Ω†Ë∑®ÈÅé‰∏ÄÊ¨°Êá∂ÊÉ∞Ôºå‰ª•ÂæåÂ∞±Ë∑®ÈÅéÂçÅÊ¨°„ÄÇ",
"ÊàêÈï∑‰∏çÊòØÂÅ∂ÁÑ∂ÔºåÊòØÁøíÊÖ£‰ΩøÁÑ∂„ÄÇ",
"‰Ω†ÁèæÂú®Âª∫Á´ãÁöÑÁøíÊÖ£ÔºåÂ∞±ÊòØ‰Ω†Êú™‰æÜÁöÑÂ∫ïÁâå„ÄÇ",
"Ëá™Âæã‰∏çÊòØÂ§©Ë≥¶ÔºåÊòØÈçõÈçä„ÄÇ",
"Êúâ‰∫õ‰∫ã‰Ω†‰∏çÊÉ≥ÂÅöÔºå‰ΩÜ‰Ω†Áü•ÈÅìÂÆÉÂ∞ç‰Ω†ÂæàÂ•Ω„ÄÇ",
"‰Ω†ËÉΩÊéåÊéß‰∏ÄÂ§©ÔºåÂ∞±ËÉΩÊéåÊéß‰∏ÄÁîü„ÄÇ",
"Â∞èÁøíÊÖ£ÊúÉËÆäÊàêÂ§ßÊàêÊûú„ÄÇ",
"‰ªäÂ§©ÂÅöÈõ£ÁöÑ‰∫ãÔºåÊòéÂ§©ÂÅöÊÉ≥ÂÅöÁöÑ‰∫ã„ÄÇ",
"‰ªäÂ§©ÁöÑÁøíÊÖ£ÔºåÊ±∫ÂÆöÊú™‰æÜÁöÑÂëΩÈÅã„ÄÇ",
"ÂÅö‰Ω†ÊáâË©≤ÂÅöÁöÑÔºåËÄå‰∏çÊòØ‰Ω†ÊÉ≥ÂÅöÁöÑ„ÄÇ",
"Â†ÖÊåÅÁ¥ØÁ©çÔºå‰Ω†ÊúÉÊØîËá™Â∑±ÊÉ≥ÂÉèÁöÑÈÇÑÂé≤ÂÆ≥„ÄÇ"
"ËÆÄÊõ∏‰∏çÊòØÁÇ∫‰∫ÜËÄÉË©¶ÔºåÊòØÁÇ∫‰∫ÜÁµ¶Êú™‰æÜÁöÑËá™Â∑±Êõ¥Â§öÈÅ∏Êìá„ÄÇ",
"‰Ω†‰ªäÂ§©ÁøªÁöÑÊØè‰∏ÄÈ†ÅÔºåÈÉΩÊúÉÂú®Êú™‰æÜËÆäÊàê‰Ω†ÁöÑÂ∫ïÊ∞£„ÄÇ",
"ÁèæÂú®Â§öËÆÄ‰∏ÄÂ∞èÊôÇÔºå‰ª•ÂæåÂ∞ëÁÑ¶ÊÖÆ‰∏ÄÂ§©„ÄÇ",
"‰Ω†ÂØ´ÁöÑ‰∏çÊòØÈ°åÁõÆÔºåÊòØÊú™‰æÜÁöÑÁîüÊ¥ªÂìÅË≥™„ÄÇ",
"‰∏çÊúÉÊ≤íÈóú‰øÇÔºåÁèæÂú®Âä™ÂäõÊúÉ„ÄÇ",
"ÊØî‰Ω†ËÅ∞ÊòéÁöÑ‰∫∫ÈÉΩÂú®Âä™Âäõ‰∫ÜÔºå‰Ω†ÈÇÑÂú®Á≠â‰ªÄÈ∫ºÔºü",
"ËÆÄÊõ∏‰∏çÊòØÊá≤ÁΩ∞ÔºåÊòØÈÄöÂæÄËá™Áî±ÁöÑË∑Ø„ÄÇ",
"Â≠∏Áøí‰∏çËÉΩËÆì‰Ω†ÁÑ°ÊïµÔºå‰ΩÜÂèØ‰ª•ËÆì‰Ω†‰∏çÂÜçÁÑ°Âä©„ÄÇ",
"ÊØèÊ¨°Âùê‰∏ã‰æÜËÆÄÊõ∏ÔºåÈÉΩÊòØÂú®ÊïëÊú™‰æÜÁöÑËá™Â∑±‰∏ÄÂëΩ„ÄÇ",
"‰ªäÂ§©‰∏çÊáÇÁöÑÔºåÊòéÂ§©ÁπºÁ∫åÔºõÈáçÈªûÊòØ‰∏çË¶ÅÊîæÊ£Ñ„ÄÇ",
"ËÆÄÂæóË∂äÂ§öÔºå‰Ω†Â∞±Ë∂ä‰∏çÊÄï‰∏ñÁïå„ÄÇ",
"‰Ω†ÁèæÂú®Á¥ØÔºåÊòØÂõ†ÁÇ∫‰Ω†Âú®ÂæÄ‰∏äÁà¨„ÄÇ",
"‰∏çË¶ÅÊÄ•ËëóÁúãÂà∞ÊàêÊûúÔºåÊää‰ªäÂ§©ÂÅöÂ•ΩÂ∞±Ë¥è‰∫Ü„ÄÇ",
"Áü•Ë≠òÊúÉËÉåÂèõ‰Ω†‰∏ÄÊ¨°Ôºå‰ΩÜÂä™Âäõ‰∏çÊúÉ„ÄÇ",
"‰Ω†‰∏çÊòØ‰∏çË°åÔºå‰Ω†Âè™ÊòØÈÇÑÊ≤íÁ∑¥Âà∞„ÄÇ",
"Â≠∏Áøí‰∏çÊúÉËÉåÂèõ‰ªª‰Ωï‰∏ÄÂÄãË™çÁúüÂ∞çÂæÖÂÆÉÁöÑ‰∫∫„ÄÇ",
"ÁèæÂú®ËÆÄÁöÑÊØè‰∏ÄÈ†ÅÔºåÈÉΩÂú®ÊÇÑÊÇÑËÆäÊàê‰Ω†ÁöÑÂØ¶Âäõ„ÄÇ",
"ËÄÉË©¶‰∏çÊòØÊïµ‰∫∫ÔºåÊòØÈ©óË≠â‰Ω†ÁöÑÂä™ÂäõËÄåÂ∑≤„ÄÇ",
"Ë∂äÂä™ÂäõÔºåË∂äÂπ∏ÈÅãÔºõË∂äÊîæÊ£ÑÔºåË∂äÂπ≥Âá°„ÄÇ",
"‰ªäÂ§©ÁøªÈñãÁöÑÔºå‰∏çÂè™ÊòØÊõ∏ÔºåÊòØÂëΩÈÅã„ÄÇ"
"‰ªäÂ§©‰∏çÂÅöÁöÑÔºåÊòéÂ§©‰πü‰∏çÊúÉÁ™ÅÁÑ∂ËÆäÁ∞°ÂñÆ„ÄÇ",
"ÈñãÂßãÊ∞∏ÈÅ†ÊòØÊúÄÈõ£ÁöÑÈÇ£‰∏ÄÊ≠•Ôºå‰ΩÜ‰Ω†Â∑≤Á∂ìÊ∫ñÂÇôÂ•Ω‰∫Ü„ÄÇ",
"‰∏çË¶ÅÁ≠âÂãïÂäõÔºåË°åÂãïÊú¨Ë∫´ÊúÉÁîüÂá∫ÂãïÂäõ„ÄÇ",
"‰∏ÄÊ¨°Âè™ÂÅö‰∏Ä‰ª∂‰∫ãÔºå‰ΩÜÂÅöÂà∞ÊúÄÂ•Ω„ÄÇ",
"‰Ω†Ë¶∫ÂæóÈõ£ÔºåÊòØÂõ†ÁÇ∫‰Ω†Ê≠£Âú®ÊàêÈï∑„ÄÇ",
"‰Ω†Ê≤íÊúâ‰∏çÊúÉÔºåÂè™ÊòØÈÇÑÊ≤íÈñãÂßãÂÅö„ÄÇ",
"ÂãïËµ∑‰æÜÊØîÊÉ≥‰∏ÄÁôæÊ¨°Êõ¥ÈáçË¶Å„ÄÇ",
"ÊääÊ≥®ÊÑèÂäõÊîæÂú®„Äé‰∏ã‰∏ÄÊ≠•„ÄèËÄå‰∏çÊòØ„ÄéÂÖ®ÈÉ®„Äè„ÄÇ",
"‰Ω†Ë∂äÊãñÂª∂ÔºåÂ£ìÂäõË∂äÂ§ßÔºõ‰Ω†Ë∂äÂÅöÔºåÂ£ìÂäõË∂äÂ∞è„ÄÇ",
"Ë°åÂãïÊØîÂÆåÁæéÊõ¥ÈáçË¶Å„ÄÇ",
"‰∏ÄÊ¨°ÂÆåÊàê 1%ÔºåÁ¥ØÁ©çËµ∑‰æÜÂ∞±ÊòØ 100%„ÄÇ",
"‰∏çË¶ÅÊÉ≥ËÉΩ‰∏çËÉΩÂÅöÂà∞ÔºåÂÖàÂÅöÂÜçË™™„ÄÇ",
"ÊàêÂäü‰∏çÊòØÁàÜÁôºÔºåËÄåÊòØÁ¥ØÁ©ç„ÄÇ",
"ÊòéÂ§©ÊÉ≥ÂÅ∑Êá∂ÔºåÂ∞±ËÆì‰ªäÂ§©Êõ¥Âä™Âäõ„ÄÇ",
"ÁèæÂú®ÈñãÂßãÂÅöÁöÑ‰Ω†ÔºåÂ∑≤Á∂ìË¥èÈÅé 90% ÁöÑ‰∫∫„ÄÇ",
"ÁúüÊ≠£ÁöÑËá™ÂæãÊòØÔºöÂç≥‰Ωø‰∏çÊÉ≥ÂÅöÔºå‰πüÊúÉÂéªÂÅö„ÄÇ",
"Ë∂äÊÉ≥Ë∂äÈõ£ÔºåÂéªÂÅöÂ∞±Á∞°ÂñÆ„ÄÇ",
"‰Ω†Ê∞∏ÈÅ†‰∏çÊúÉÂæåÊÇîÂÅöÂÆåÁöÑ‰∫ãÊÉÖÔºåÂè™ÊúÉÂæåÊÇîÊ≤íÈñãÂßã„ÄÇ",
"‰Ω†‰ª•ÁÇ∫ÁöÑÂ£ìÂäõÔºåÂè™ÊòØ‰Ω†ÈÇÑÊ≤íÂãïÊâã„ÄÇ",
"Ë°åÂãïÊòØÊúÄÂº∑ÁöÑËß£Ëó•„ÄÇ"

];

function pickQuote() {
  const q = QUOTES[Math.floor(Math.random() * QUOTES.length)];
  document.getElementById("quoteText").textContent = q;
}

/* ========= ÁøíÊÖ£Ë≥áÊñô ========= */
const HABITS_KEY = "starHabits_multi";
const CAL_KEY    = "starHabits_calendar";

function todayKey() {
  return new Date().toISOString().slice(0,10);
}

function loadHabits() {
  try {
    const raw = localStorage[HABITS_KEY];
    if (!raw) {
      const defaults = [
        {id:"h1", name:"ËÆÄÊõ∏ 2 Â∞èÊôÇ", desc:"Âè™Ë¶Å‰ªäÂ§©ÊúâÂ•ΩÂ•ΩÂùê‰∏ã‰æÜËÆÄÊõ∏ÔºåÂ∞±Èªû‰∫ÆÈÄôÈ°ÜÊòü"},
        {id:"h2", name:"ÈÅãÂãï", desc:"Âì™ÊÄïÂè™ÊòØ 10 ÂàÜÈêò‰πüÁÆó"},
        {id:"h3", name:"Êó©Áù°", desc:"Ë∂ÖÈÅé 12 ÈªûÂ∞±‰∏çÁÆó"}
      ];
      localStorage[HABITS_KEY] = JSON.stringify(defaults);
      return defaults;
    }
    return JSON.parse(raw);
  } catch(e) {
    return [];
  }
}

function saveHabits(list) {
  localStorage[HABITS_KEY] = JSON.stringify(list);
}

function loadCalendar() {
  try {
    return JSON.parse(localStorage[CAL_KEY] || "{}");
  } catch(e) {
    return {};
  }
}

function saveCalendar(cal) {
  localStorage[CAL_KEY] = JSON.stringify(cal);
}

let habits   = loadHabits();
let calendar = loadCalendar();

/* ========= Â∑•ÂÖ∑ ========= */
function isDone(habitId, dateKey) {
  const byHabit = calendar[habitId] || {};
  return !!byHabit[dateKey];
}

function setDone(habitId, dateKey, value) {
  if (!calendar[habitId]) calendar[habitId] = {};
  if (value) calendar[habitId][dateKey] = true;
  else delete calendar[habitId][dateKey];
  saveCalendar(calendar);
}

/* ÈÄ£Á∫åÂ§©Êï∏ streak */
function getStreak(habitId) {
  const byHabit = calendar[habitId] || {};
  let streak = 0;
  const now = new Date();
  for (let i = 0; ; i++) {
    const d = new Date(now);
    d.setDate(now.getDate() - i);
    const key = d.toISOString().slice(0,10);
    if (byHabit[key]) streak++;
    else break;
  }
  return streak;
}

/* ========= HUD ========= */
const hud = document.getElementById("hud");
function showHUD(msg) {
  hud.textContent = msg;
  hud.style.opacity = 1;
  setTimeout(()=>hud.style.opacity = 0, 900);
}

/* ========= Ê∏≤ÊüìÁøíÊÖ£Âç°Áâá ========= */
const habitListDiv = document.getElementById("habitList");

function renderHabits() {
  habitListDiv.innerHTML = "";

  const today = todayKey();

  habits.forEach(habit => {
    const card = document.createElement("div");
    card.className = "habitCard";
    card.dataset.id = habit.id;

    // header
    const header = document.createElement("div");
    header.className = "habitHeader";

    const nameDiv = document.createElement("div");
    nameDiv.className = "habitName";
    nameDiv.textContent = habit.name;

    const rightHeader = document.createElement("div");

    const streakDiv = document.createElement("div");
    streakDiv.className = "habitStreak";
    const s = getStreak(habit.id);
    streakDiv.textContent = s > 0 ? `üî• Â∑≤ÈÄ£Á∫å ${s} Â§©` : "ÈÇÑÊ≤íÈñãÂßã";

    const editBtn = document.createElement("button");
    editBtn.className = "editBtn";
    editBtn.textContent = "‚ãØ";
    editBtn.title = "ÈáçÊñ∞ÂëΩÂêç / Âà™Èô§";

    rightHeader.appendChild(streakDiv);
    rightHeader.appendChild(editBtn);

    header.appendChild(nameDiv);
    header.appendChild(rightHeader);
    card.appendChild(header);

    // desc
    const descDiv = document.createElement("div");
    descDiv.className = "habitDesc";
    descDiv.textContent = habit.desc || "";
    card.appendChild(descDiv);

    // main row: star + button
    const mainRow = document.createElement("div");
    mainRow.className = "habitMainRow";

    const starSpan = document.createElement("span");
    starSpan.className = "bigStar";
    starSpan.textContent = "‚òÖ";
    if (isDone(habit.id, today)) starSpan.classList.add("done");

    const toggleBtn = document.createElement("button");
    toggleBtn.className = "toggleBtn";
    toggleBtn.textContent = isDone(habit.id, today)
      ? "ÂèñÊ∂à‰ªäÂ§©"
      : "‰ªäÂ§©ÂÆåÊàê‰∫Ü";

    mainRow.appendChild(starSpan);
    mainRow.appendChild(toggleBtn);
    card.appendChild(mainRow);

    // mini history: ÊúÄËøë 7 Â§©
    const mini = document.createElement("div");
    mini.className = "miniHistory";
    const now = new Date();
    for (let i = 6; i >= 0; i--) {
      const d = new Date(now);
      d.setDate(now.getDate() - i);
      const key = d.toISOString().slice(0,10);

      const dot = document.createElement("div");
      dot.className = "miniDot";
      if (isDone(habit.id, key)) dot.classList.add("done");
      mini.appendChild(dot);
    }
    card.appendChild(mini);

    habitListDiv.appendChild(card);
  });
}

/* ========= ‰∫ã‰ª∂ÔºöÂç°ÁâáÂÖßÈªûÊìä ========= */
habitListDiv.addEventListener("click", (e) => {
  const card = e.target.closest(".habitCard");
  if (!card) return;
  const id = card.dataset.id;
  const today = todayKey();

  // ÈªûÊòüÊòü or ÊåâÈàï ‚Üí ÂàáÊèõÂÆåÊàêÁãÄÊÖã
  if (e.target.classList.contains("bigStar") ||
      e.target.classList.contains("toggleBtn")) {

    const done = !isDone(id, today);
    setDone(id, today, done);
    renderHabits();
    pickQuote();   // ÂàáÊèõÊôÇÈ†Ü‰æøÊèõ‰∏ÄÂè•Ë©±
    showHUD(done ? "‚≠ê ‰ªäÂ§©ÂÆåÊàêÔºÅ" : "Â∑≤ÂèñÊ∂à‰ªäÂ§©Á¥ÄÈåÑ");
    return;
  }

  // Á∑®ËºØÁøíÊÖ£
  if (e.target.classList.contains("editBtn")) {
    const habit = habits.find(h => h.id === id);
    if (!habit) return;
    const action = prompt(
      "Ëº∏ÂÖ•Êñ∞ÂêçÁ®±ÔºåÊàñËº∏ÂÖ• DELETE Âà™Èô§Ê≠§ÁøíÊÖ£Ôºö",
      habit.name
    );
    if (action === null) return;
    if (action === "DELETE") {
      if (confirm("Á¢∫ÂÆöË¶ÅÂà™Èô§ÈÄôÂÄãÁøíÊÖ£ÂóéÔºüÊ≠∑Âè≤Á¥ÄÈåÑ‰πüÊúÉ‰∏ÄËµ∑Âà™Êéâ„ÄÇ")) {
        habits = habits.filter(h => h.id !== id);
        delete calendar[id];
        saveHabits(habits);
        saveCalendar(calendar);
        renderHabits();
        showHUD("Â∑≤Âà™Èô§ÁøíÊÖ£");
      }
    } else {
      habit.name = action;
      const newDesc = prompt("ÂèØÈÅ∏ÔºöÊõ¥Êñ∞ÊèèËø∞ÔºàÁïôÁ©∫Â∞±‰∏çÊîπÔºâ", habit.desc || "");
      if (newDesc !== null && newDesc !== "") {
        habit.desc = newDesc;
      }
      saveHabits(habits);
      renderHabits();
      showHUD("Â∑≤Êõ¥Êñ∞ÁøíÊÖ£");
    }
  }
});

/* ========= Êñ∞Â¢ûÁøíÊÖ£ ========= */
document.getElementById("btnAddHabit").addEventListener("click", () => {
  const name = prompt("ÁøíÊÖ£ÂêçÁ®±Ôºà‰æãÂ¶ÇÔºöÊØèÂ§©ÂØ´ 2 È°åÊï∏Â≠∏Ôºâ");
  if (!name) return;
  const desc = prompt("Á∞°Áü≠ÊèèËø∞ÔºàÂèØÁïôÁ©∫Ôºâ", "‰Ω†ÊÉ≥Ë¶ÅÊ±ÇËá™Â∑±ÁöÑÂÖ∑È´îÊ®ôÊ∫ñÔºå‰æãÂ¶ÇËÆÄÊõ∏Â§ö‰πÖÁÆóÂÆåÊàê");
  const id = "h_" + Date.now();
  habits.push({id, name, desc: desc || ""});
  saveHabits(habits);
  renderHabits();
  showHUD("Â∑≤Êñ∞Â¢ûÁøíÊÖ£");
});

/* ========= Êèõ‰∏ÄÂè•Ë™ûÈåÑ ========= */
document.getElementById("btnNewQuote").addEventListener("click", () => {
  pickQuote();
});

/* ========= Conway ËÉåÊôØ ========= */
const canvas = document.getElementById("bg");
const ctx = canvas.getContext("2d");
let cols, rows, grid;
const cellSize = 7;

function resize() {
  canvas.width = innerWidth;
  canvas.height = innerHeight;
  cols = Math.floor(innerWidth / cellSize);
  rows = Math.floor(innerHeight / cellSize);
  randomGrid();
}
window.addEventListener("resize", resize);
resize();

function randomGrid() {
  grid = Array.from({length: rows}, () =>
    Array.from({length: cols}, () => Math.random() < 0.12 ? 1 : 0)
  );
}

function nextGen() {
  let ng = grid.map(r => [...r]);
  for (let y=0;y<rows;y++){
    for (let x=0;x<cols;x++){
      let n=0;
      for (let dy=-1;dy<=1;dy++)
        for (let dx=-1;dx<=1;dx++)
          if(dx||dy) n+=grid[(y+dy+rows)%rows][(x+dx+cols)%cols];
      ng[y][x]=(n===3||n===2&&grid[y][x])?1:0;
    }
  }
  grid = ng;
}

function draw() {
  ctx.fillStyle = "#05060f";
  ctx.fillRect(0,0,canvas.width,canvas.height);

  ctx.fillStyle = "#4fa3ff2a";
  for (let y=0;y<rows;y++){
    for (let x=0;x<cols;x++){
      if(grid[y][x]) ctx.fillRect(x*cellSize,y*cellSize,cellSize,cellSize);
    }
  }
}

function loop() {
  nextGen();
  draw();
  requestAnimationFrame(loop);
}
loop();

/* ========= ‚ö° ÈáçÁîüÂÆáÂÆô ========= */
document.getElementById("btnUniverse").addEventListener("click", () => {
  randomGrid();
  showHUD("‚ö° Êñ∞ÂÆáÂÆô");
});

/* ========= ÂàùÂßãÂåñ ========= */
pickQuote();
renderHabits();
</script>
</body>
</html>
